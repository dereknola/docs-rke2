"use strict";(self.webpackChunkrke_2_docs=self.webpackChunkrke_2_docs||[]).push([[146],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var l=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,l,a=function(e,t){if(null==e)return{};var n,l,a={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=l.createContext({}),u=function(e){var t=l.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return l.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},d=l.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,h=d["".concat(i,".").concat(m)]||d[m]||p[m]||r;return n?l.createElement(h,s(s({ref:t},c),{},{components:n})):l.createElement(h,s({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,s=new Array(r);s[0]=d;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var u=2;u<r;u++)s[u]=n[u];return l.createElement.apply(null,s)}return l.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>s});var l=n(7294),a=n(6010);const r="tabItem_Ymn6";function s(e){let{children:t,hidden:n,className:s}=e;return l.createElement("div",{role:"tabpanel",className:(0,a.Z)(r,s),hidden:n},t)}},5488:(e,t,n)=>{n.d(t,{Z:()=>m});var l=n(7462),a=n(7294),r=n(6010),s=n(2389),o=n(7392),i=n(7094),u=n(2466);const c="tabList__CuJ",p="tabItem_LNqP";function d(e){const{lazy:t,block:n,defaultValue:s,values:d,groupId:m,className:h}=e,b=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=d??b.map((e=>{let{props:{value:t,label:n,attributes:l}}=e;return{value:t,label:n,attributes:l}})),f=(0,o.l)(k,((e,t)=>e.value===t.value));if(f.length>0)throw new Error(`Docusaurus error: Duplicate values "${f.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const v=null===s?s:s??b.find((e=>e.props.default))?.props.value??b[0].props.value;if(null!==v&&!k.some((e=>e.value===v)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${v}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:g}=(0,i.U)(),[w,E]=(0,a.useState)(v),T=[],{blockElementScrollPositionUntilNextRender:N}=(0,u.o5)();if(null!=m){const e=y[m];null!=e&&e!==w&&k.some((t=>t.value===e))&&E(e)}const x=e=>{const t=e.currentTarget,n=T.indexOf(t),l=k[n].value;l!==w&&(N(t),E(l),null!=m&&g(m,String(l)))},O=e=>{let t=null;switch(e.key){case"Enter":x(e);break;case"ArrowRight":{const n=T.indexOf(e.currentTarget)+1;t=T[n]??T[0];break}case"ArrowLeft":{const n=T.indexOf(e.currentTarget)-1;t=T[n]??T[T.length-1];break}}t?.focus()};return a.createElement("div",{className:(0,r.Z)("tabs-container",c)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},h)},k.map((e=>{let{value:t,label:n,attributes:s}=e;return a.createElement("li",(0,l.Z)({role:"tab",tabIndex:w===t?0:-1,"aria-selected":w===t,key:t,ref:e=>T.push(e),onKeyDown:O,onClick:x},s,{className:(0,r.Z)("tabs__item",p,s?.className,{"tabs__item--active":w===t})}),n??t)}))),t?(0,a.cloneElement)(b.filter((e=>e.props.value===w))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},b.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==w})))))}function m(e){const t=(0,s.Z)();return a.createElement(d,(0,l.Z)({key:String(t)},e))}},6156:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>u,toc:()=>p});var l=n(7462),a=(n(7294),n(3905)),r=n(5488),s=n(5162);const o={title:"Linux Uninstall"},i="Linux Uninstall",u={unversionedId:"install/linux_uninstall",id:"install/linux_uninstall",title:"Linux Uninstall",description:"Uninstalling RKE2 deletes the cluster data and all of the scripts.",source:"@site/docs/install/linux_uninstall.md",sourceDirName:"install",slug:"/install/linux_uninstall",permalink:"/install/linux_uninstall",draft:!1,editUrl:"https://github.com/rancher/rke2-docs/edit/main/docs/install/linux_uninstall.md",tags:[],version:"current",lastUpdatedAt:1670975079,formattedLastUpdatedAt:"Dec 13, 2022",frontMatter:{title:"Linux Uninstall"},sidebar:"mySidebar",previous:{title:"Windows Air-Gap Install",permalink:"/install/windows_airgap"},next:{title:"Windows Uninstall",permalink:"/install/windows_uninstall"}},c={},p=[{value:"RPM Method",id:"rpm-method",level:2},{value:"Tarball Method",id:"tarball-method",level:2}],d={toc:p};function m(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,l.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"linux-uninstall"},"Linux Uninstall"),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Uninstalling RKE2 deletes the cluster data and all of the scripts.")),(0,a.kt)("p",null,"Depending on the method used to install RKE2, the uninstallation process varies."),(0,a.kt)("h2",{id:"rpm-method"},"RPM Method"),(0,a.kt)("p",null,"To uninstall RKE2 installed via the RPM method from your system, simply run the commands corresponding to the version of RKE2 you have installed, either as the root user or through ",(0,a.kt)("inlineCode",{parentName:"p"},"sudo"),". This will shutdown RKE2 process, remove the RKE2 RPMs, and clean up files used by RKE2."),(0,a.kt)(r.Z,{mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"v1.18.13+rke2r1 and newer",default:!0,mdxType:"TabItem"},(0,a.kt)("p",null,"The bundled ",(0,a.kt)("inlineCode",{parentName:"p"},"rke2-uninstall.sh")," script will remove the corresponding RPM packages during the uninstall process. Simply run the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/bin/rke2-uninstall.sh\n"))),(0,a.kt)(s.Z,{value:"v1.18.11+rke2r1 - v1.18.12+rke2r1",default:!0,mdxType:"TabItem"},(0,a.kt)("p",null,"You will need to manually remove the RKE2 RPMs after calling the ",(0,a.kt)("inlineCode",{parentName:"p"},"rke2-uninstall.sh")," script."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"/usr/bin/rke2-uninstall.sh\nyum remove -y 'rke2-*'\nrm -rf /run/k3s\n"))),(0,a.kt)(s.Z,{value:"v1.18.10+rke2r1 and Older",default:!0,mdxType:"TabItem"},(0,a.kt)("p",null,"RPM based installs did not package the ",(0,a.kt)("inlineCode",{parentName:"p"},"rke2-uninstall.sh")," script. These instructions provide guidance on how to download and use the necessary scripts."),(0,a.kt)("p",null,"First, remove the corresponding RKE2 packages and ",(0,a.kt)("inlineCode",{parentName:"p"},"/run/k3s")," directory."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"yum remove -y 'rke2-*'\nrm -rf /run/k3s\n")),(0,a.kt)("p",null,"Once those commands are run, the rke2-uninstall.sh and rke2-killall.sh scripts should be downloaded. These two scripts will stop any running containers and processes, clean up used processes, and ultimately remove RKE2 from the system. Run the commands below."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"curl -sL https://raw.githubusercontent.com/rancher/rke2/master/bundle/bin/rke2-uninstall.sh --output rke2-uninstall.sh\nchmod +x rke2-uninstall.sh\nmv rke2-uninstall.sh /usr/local/bin\n\ncurl -sL https://raw.githubusercontent.com/rancher/rke2/master/bundle/bin/rke2-killall.sh --output rke2-killall.sh\nchmod +x rke2-killall.sh\nmv rke2-killall.sh /usr/local/bin\n\n")),(0,a.kt)("p",null,"Now run the rke2-uninstall.sh script. This will also call the rke2-killall.sh."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/local/bin/rke2-uninstall.sh\n")))),(0,a.kt)("h2",{id:"tarball-method"},"Tarball Method"),(0,a.kt)("p",null,"To uninstall RKE2 installed via the Tarball method from your system, simply run the command below. This will terminate the process, remove the RKE2 binary, and clean up files used by RKE2."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/local/bin/rke2-uninstall.sh\n")))}m.isMDXComponent=!0}}]);